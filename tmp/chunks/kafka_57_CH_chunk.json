{
  "antipattern_type": "CH",
  "project_name": "kafka",
  "commit_number": "commit_1000",
  "id": "57",
  "group_id": 4,
  "chunks": [
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "parent_method",
      "chunk_id": "parent_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier)))))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "parent_call_child",
      "chunk_id": "parent_call_child",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "parent_file_structure",
      "chunk_id": "parent_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) interfaces: (super_interfaces (type_list (type_identifier))) body: (class_body (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier) value: (decimal_integer_literal))) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (constructor_body (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (line_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (block_comment) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters)) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (decimal_integer_literal)))))) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (generic_type (type_identifier) (type_arguments (type_identifier))) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (lambda_expression parameters: (identifier) body: (identifier)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (lambda_expression parameters: (identifier) body: (decimal_integer_literal))))))))))) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (generic_type (type_identifier) (type_arguments (type_identifier))) name: (identifier))) body: (block (local_variable_declaration type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) declarator: (variable_declarator name: (identifier) value: (object_creation_expression type: (generic_type (type_identifier) (type_arguments)) arguments: (argument_list)))) (enhanced_for_statement type: (type_identifier) name: (identifier) value: (identifier) body: (expression_statement (method_invocation name: (identifier) arguments: (argument_list (identifier) (identifier))))) (return_statement (identifier)))) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (generic_type (type_identifier) (type_arguments (wildcard) (type_identifier))) name: (identifier))) body: (block (local_variable_declaration type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) declarator: (variable_declarator name: (identifier) value: (object_creation_expression type: (generic_type (type_identifier) (type_arguments)) arguments: (argument_list)))) (enhanced_for_statement type: (type_identifier) name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) body: (expression_statement (method_invocation name: (identifier) arguments: (argument_list (identifier) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))) (return_statement (identifier)))) (method_declaration (modifiers) type: (void_type) name: (identifier) parameters: (formal_parameters (formal_parameter type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (decimal_integer_literal))))) (expression_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (binary_expression left: (identifier) right: (decimal_integer_literal))))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) (local_variable_declaration type: (integral_type) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))))) (if_statement condition: (parenthesized_expression (binary_expression left: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) consequence: (block (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))) right: (string_literal (string_fragment))) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))) right: (string_literal (string_fragment))) right: (identifier)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))))) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier) (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier))))))))))) (block_comment) (method_declaration (modifiers) type: (boolean_type) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (false)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (block_comment) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters)) (block_comment) (method_declaration (modifiers) type: (void_type) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (method_invocation name: (identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "parent_file_summary",
      "chunk_id": "parent_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "{\n  \"class_purpose\": \"AbstractResponse is the common base class for all Kafka protocol response messages. It encapsulates shared behavior such as serialization, parsing, error counting, throttle handling, and provides the APIâ€‘key that identifies the concrete response type.\",\n  \"key_fields\": [\n    {\n      \"name\": \"apiKey\",\n      \"description\": \"The ApiKeys enum value that identifies which Kafka API this response belongs to. It is set at construction time and never changes.\"\n    },\n    {\n      \"name\": \"DEFAULT_THROTTLE_TIME\",\n      \"description\": \"A constant (0) representing the default throttleâ€‘time value when a response schema does not include a throttle field.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"AbstractResponse(ApiKeys apiKey)\",\n      \"description\": \"Protected constructor that records the ApiKey for the concrete response subclass.\"\n    },\n    {\n      \"name\": \"toSend(ResponseHeader header, short version)\",\n      \"description\": \"Creates a `Send` object that contains the fully serialized response (header + body) prefixed with its length, ready to be written to a socket.\"\n    },\n    {\n      \"name\": \"serializeWithHeader(ResponseHeader header, short version)\",\n      \"description\": \"Serializes the response together with the supplied header **without** the size prefix, useful for internal testing or custom framing.\"\n    },\n    {\n      \"name\": \"serialize(short version)\",\n      \"description\": \"Serializes only the response body (no header) into a ByteBuffer; the method is packageâ€‘private and primarily used in tests.\"\n    },\n    {\n      \"name\": \"errorCounts()\",\n      \"description\": \"Abstract method that each concrete response must implement to return a map of `Errors` â†’ occurrence count for that response.\"\n    },\n    {\n      \"name\": \"errorCounts(Errors error)\",\n      \"description\": \"Utility that creates a singleton errorâ€‘count map for a single error value.\"\n    },\n    {\n      \"name\": \"errorCounts(Stream<Errors> errors)\",\n      \"description\": \"Utility that aggregates a stream of Errors into a map of error â†’ count.\"\n    },\n    {\n      \"name\": \"errorCounts(Collection<Errors> errors)\",\n      \"description\": \"Utility that aggregates a collection of Errors into a map of error â†’ count.\"\n    },\n    {\n      \"name\": \"apiErrorCounts(Map<?, ApiError> errors)\",\n      \"description\": \"Utility that extracts the `Errors` from a map of `ApiError` objects and builds the errorâ€‘count map.\"\n    },\n    {\n      \"name\": \"updateErrorCounts(Map<Errors, Integer> errorCounts, Errors error)\",\n      \"description\": \"Helper that increments the count for a given error in the supplied map.\"\n    },\n    {\n      \"name\": \"parseResponse(ByteBuffer buffer, RequestHeader requestHeader)\",\n      \"description\": \"Static factory that reads a `ResponseHeader` from the buffer, validates the correlation id against the request, and delegates to the overload that takes an `ApiKeys` value.\"\n    },\n    {\n      \"name\": \"parseResponse(ApiKeys apiKey, ByteBuffer responseBuffer, short version)\",\n      \"description\": \"Static dispatcher that selects the concrete response class based on the ApiKey and invokes its `parse` method to construct the appropriate response object.\"\n    },\n    {\n      \"name\": \"shouldClientThrottle(short version)\",\n      \"description\": \"Indicates whether a client must apply its own throttling for this response version when the response contains a nonâ€‘zero throttle time. Default implementation returns `false`; subclasses may override.\"\n    },\n    {\n      \"name\": \"apiKey()\",\n      \"description\": \"Getter for the ApiKey associated with this response.\"\n    },\n    {\n      \"name\": \"throttleTimeMs()\",\n      \"description\": \"Abstract method that concrete responses implement to return the throttle time (in ms) encoded in the response schema, or 0 if not supported.\"\n    },\n    {\n      \"name\": \"maybeSetThrottleTimeMs(int throttleTimeMs)\",\n      \"description\": \"Abstract method that concrete responses implement to set the throttleâ€‘time field when the schema supports it; otherwise it is a noâ€‘op.\"\n    },\n    {\n      \"name\": \"toString()\",\n      \"description\": \"Returns a string representation of the underlying response data structure (the generated schema class) by delegating to its `toString`.\"\n    }\n  ]\n}"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "parent_method_summary",
      "chunk_id": "parent_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"method_purpose\": \"Parse a raw Kafka response (contained in a ByteBuffer) into a concrete subclass of `AbstractResponse` that corresponds to the supplied `ApiKeys` value and protocol version. The method acts as a central dispatch point, delegating to the static `parse` method of the appropriate response class and returning the resulting `AbstractResponse` instance.\",\n  \"cyclic_hierarchy_relation\": \"The method lives in the superclass (`AbstractResponse`) but knows about every concrete subclass (e.g., `ProduceResponse`, `FetchResponse`, â€¦). Each concrete response class extends `AbstractResponse` **and** is referenced by the static dispatch method. This creates a twoâ€‘way dependency: the subclass depends on the superclass for inheritance, while the superclass depends on the subclass for object creation. In other words, the hierarchy is cyclic â€“ the parent class must be aware of all its children to perform the parsing, which couples the base class to its implementations.\",\n  \"design_issues\": [\n    \"**Violation of the Open/Closed Principle** â€“ Adding a new API key requires modifying this method (and recompiling the superclass), instead of simply adding a new response class.\",\n    \"**Huge switch statement** â€“ The method is long, repetitive, and errorâ€‘prone; any missing or mistyped case leads to runtime failures.\",\n    \"**Tight coupling** â€“ `AbstractResponse` is tightly coupled to every concrete response implementation, making the codebase harder to maintain and test.\",\n    \"**Lack of polymorphism** â€“ The design foregoes a more extensible approach (e.g., a registry or factory pattern) that would allow response types to selfâ€‘register.\",\n    \"**Scalability concerns** â€“ As Kafka adds more APIs, this method grows linearly, increasing compileâ€‘time and potential for merge conflicts.\",\n    \"**Potential for stale code** â€“ If a new `ApiKey` is introduced but the corresponding case is not added, an `AssertionError` will be thrown at runtime, which is a harsh failure mode.\",\n    \"**Version handling is delegated to each subclass** â€“ While this is necessary, the central method provides no validation that the supplied version is supported for the given `ApiKey`.\",\n    \"**Testing difficulty** â€“ Unitâ€‘testing this method requires a test for every API key, leading to a large and brittle test suite.\"\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractResponse.java",
      "chunk_type": "invocation_summary",
      "chunk_id": "invocation_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"invocation_purpose\": \"The statement invokes the static `parse` method of the `ControlledShutdownResponse` class, passing in a `responseBuffer` (typically a `ByteBuffer` containing raw bytes received from the broker) and a protocol `version`. The method deserializes those bytes into a concrete `ControlledShutdownResponse` instance, which is then returned to the caller. In other words, it converts the lowâ€‘level network payload into a highâ€‘level Java object that the rest of the client code can work with.\",\n  \"cyclic_dependency_explanation\": \"A cyclic dependency arises when two (or more) modules/classes depend on each other, directly or indirectly. If the class that contains this invocation (e.g., `ControlledShutdownRequestHandler`) also appears in the import graph of `ControlledShutdownResponse`â€”for example, `ControlledShutdownResponse.parse` internally calls a helper that references the request handler or a shared utility that again references the handlerâ€”then the requestâ€‘handler class depends on `ControlledShutdownResponse`, and `ControlledShutdownResponse` (or one of its collaborators) depends back on the requestâ€‘handler. This creates a circular compileâ€‘time or runtime dependency, which can lead to compilation errors, classâ€‘loader issues, or tangled code that is hard to maintain. The presence of the `parse` call in a class that is part of the same dependency loop makes the cycle evident.\"\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownResponse.java",
      "chunk_type": "child_method",
      "chunk_id": "child_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownResponse.java",
      "chunk_type": "child_file_structure",
      "chunk_id": "child_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) superclass: (superclass (type_identifier)) body: (class_body (block_comment) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (super) arguments: (argument_list (field_access object: (identifier) field: (identifier)))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list))))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (void_type) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier))) body: (block (line_comment))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier)))))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (generic_type (type_identifier) (type_arguments (type_identifier))) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (object_creation_expression type: (type_identifier) arguments: (argument_list)))) (expression_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))) (local_variable_declaration type: (scoped_type_identifier (type_identifier) (type_identifier)) declarator: (variable_declarator name: (identifier) value: (object_creation_expression type: (scoped_type_identifier (type_identifier) (type_identifier)) arguments: (argument_list)))) (expression_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (lambda_expression parameters: (identifier) body: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (method_invocation object: (object_creation_expression type: (type_identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))))))) (expression_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier)))) (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier)))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownResponse.java",
      "chunk_type": "child_file_summary",
      "chunk_id": "child_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"class_purpose\": \"Represents the response sent by a Kafka broker for a ControlledShutdown request. It encapsulates the shutdown error (if any) and the list of partitions that are still assigned to the broker and need to be transferred before the shutdown can complete.\",\n  \"key_fields\": [\n    {\n      \"name\": \"data\",\n      \"description\": \"A `ControlledShutdownResponseData` instance that holds the serialized response payload â€“ the error code and the collection of remaining partitions (topic name and partition index) that the broker must relinquish.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"ControlledShutdownResponse(ControlledShutdownResponseData data)\",\n      \"description\": \"Constructor that creates the response object, storing the supplied `ControlledShutdownResponseData` and initializing the superclass with the appropriate API key (CONTROLLED_SHUTDOWN).\"\n    },\n    {\n      \"name\": \"error()\",\n      \"description\": \"Returns the `Errors` enum corresponding to the error code contained in `data`. This is the highâ€‘level error for the controlled shutdown operation.\"\n    },\n    {\n      \"name\": \"errorCounts()\",\n      \"description\": \"Overrides `AbstractResponse.errorCounts()` to provide a map with a single entry that counts the occurrence of the responseâ€™s error (uses the helper `errorCounts(Errors)` from the base class).\"\n    },\n    {\n      \"name\": \"throttleTimeMs()\",\n      \"description\": \"Returns the throttle time for the response. For this response type the throttle is not part of the schema, so it always returns `DEFAULT_THROTTLE_TIME` (zero).\"\n    },\n    {\n      \"name\": \"maybeSetThrottleTimeMs(int throttleTimeMs)\",\n      \"description\": \"Noâ€‘op implementation because the controlledâ€‘shutdown response schema does not include a throttle time field.\"\n    },\n    {\n      \"name\": \"parse(ByteBuffer buffer, short version)\",\n      \"description\": \"Static factory that deserializes a `ControlledShutdownResponse` from the given `ByteBuffer` using the appropriate version of the schema, constructing the underlying `ControlledShutdownResponseData` with a `ByteBufferAccessor`.\"\n    },\n    {\n      \"name\": \"data()\",\n      \"description\": \"Returns the underlying `ControlledShutdownResponseData` instance. This method satisfies the `AbstractResponse` contract.\"\n    },\n    {\n      \"name\": \"prepareResponse(Errors error, Set<TopicPartition> tps)\",\n      \"description\": \"Convenient static helper that builds a `ControlledShutdownResponse` for a given error and a set of topicâ€‘partitions that remain assigned to the broker. It populates a new `ControlledShutdownResponseData` with the error code and a `RemainingPartitionCollection` containing each partitionâ€™s topic name and index, then wraps it in a new `ControlledShutdownResponse`.\"\n    }\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/57/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownResponse.java",
      "chunk_type": "child_method_summary",
      "chunk_id": "child_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"method_purpose\": \"The static `parse` method converts the raw bytes contained in a `ByteBuffer` into a fullyâ€‘initialised `ControlledShutdownResponse` object for the supplied protocol version. It acts as a deserialization factory: it wraps the buffer in a `ByteBufferAccessor`, builds a `ControlledShutdownResponseData` (which knows how to read the fields for the given version), and then hands that data object to the `ControlledShutdownResponse` constructor.\",\n  \"exposed_details\": \"By constructing a `ControlledShutdownResponseData` with a `ByteBufferAccessor` and the `version` argument, the method leaks the lowâ€‘level parsing state to the higherâ€‘level response object (and consequently to any superclass that `ControlledShutdownResponse` extends). The superclass therefore receives:\\n- Direct access to the original `ByteBuffer` through the accessor (raw bytes, position, limit, etc.).\\n- The protocol version number, which may affect how the superclass interprets or validates the data.\\n- The fullyâ€‘populated `ControlledShutdownResponseData` instance, which contains the parsed fields (e.g., error code, throttle time) that were extracted from the buffer.\\nIn short, the method exposes the raw byte source and versioning information to the superclass via the dataâ€‘object payload.\",\n  \"cyclic_hierarchy_impact\": \"If the parent class defines a generic factory or parsing routine that, for a given response type, delegates to the subclassâ€™s static `parse` method (for example, `Response.read(buffer, version)` uses reflection to invoke `Subclass.parse(buffer, version)`), a circular dependency can arise when the subclassâ€™s constructor (or another overridden method) calls back into a parentâ€‘class method that again attempts to parse the same buffer. Example scenario:\\n1. `AbstractResponse.read(buffer, version)` decides the concrete type is `ControlledShutdownResponse` and calls `ControlledShutdownResponse.parse(buffer, version)`.\\n2. `ControlledShutdownResponse.parse` creates a `ControlledShutdownResponseData` and then invokes the `ControlledShutdownResponse` constructor.\\n3. Inside the `ControlledShutdownResponse` constructor (or an overridden method called by `super()`), the code calls `super.validate()` or another parent method that, for safety, reâ€‘reads the buffer by invoking `AbstractResponse.read(buffer, version)` again.\\n4. Step 1 repeats, leading to infinite recursion and a stackâ€‘overflow.\\nThus, the subclassâ€™s static parse method can be indirectly invoked by the parent classâ€™s generic parsing logic, and if the subclassâ€™s construction path calls back into any parentâ€‘class method that triggers the generic parser, a circular dependency and uncontrolled recursion occur.\",\n  \"notes\": \"To avoid such circular calls, the parent class should not reâ€‘invoke the generic parsing routine from within constructors or overridden methods, and the subclass should keep parsing logic confined to the static `parse` method without delegating back to parent parsing utilities.\"\n}\n```"
    }
  ]
}