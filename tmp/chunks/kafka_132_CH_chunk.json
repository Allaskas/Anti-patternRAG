{
  "antipattern_type": "CH",
  "project_name": "kafka",
  "commit_number": "commit_1000",
  "id": "132",
  "group_id": 1,
  "chunks": [
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_method",
      "chunk_id": "parent_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier)))))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_call_child",
      "chunk_id": "parent_call_child",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_file_structure",
      "chunk_id": "parent_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) interfaces: (super_interfaces (type_list (type_identifier))) body: (class_body (class_declaration (modifiers) name: (identifier) type_parameters: (type_parameters (type_parameter (type_identifier) (type_bound (type_identifier)))) body: (class_body (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (boolean_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (false))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (identifier) (identifier))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list))))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)))))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (if_statement condition: (parenthesized_expression (unary_expression operand: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))) consequence: (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (identifier)))))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (block_comment) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (method_invocation name: (identifier) arguments: (argument_list))))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (if_statement condition: (parenthesized_expression (binary_expression left: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) right: (identifier))) consequence: (block (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))))) (if_statement condition: (parenthesized_expression (binary_expression left: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) right: (identifier))) consequence: (block (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))))) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (line_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (line_comment) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (method_invocation name: (identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list)) (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (boolean_type) name: (identifier))) body: (block (return_statement (method_invocation object: (method_invocation name: (identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (true)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (field_access object: (identifier) field: (identifier)) (identifier)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier)))) (block_comment) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation name: (identifier) arguments: (argument_list (decimal_integer_literal) (identifier))))) (if_statement condition: (parenthesized_expression (binary_expression left: (identifier) right: (null_literal))) consequence: (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (this))))) alternative: (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (integral_type) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list (identifier) (identifier) (identifier))) (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier))))))))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_file_summary",
      "chunk_id": "parent_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"class_purpose\": \"AbstractRequest is the base class for all Kafka request messages. It encapsulates common request metadata (API key and version), provides serialization utilities, errorresponse handling, and a factory method to parse concrete request types from a byte buffer.\",\n  \"key_fields\": [\n    {\n      \"name\": \"version\",\n      \"description\": \"The protocol version of this request instance. It is validated against the ApiKey's supported versions at construction.\"\n    },\n    {\n      \"name\": \"apiKey\",\n      \"description\": \"The ApiKeys enum value identifying the type of request (e.g., PRODUCE, FETCH).\"\n    },\n    {\n      \"name\": \"Builder.apiKey\",\n      \"description\": \"The ApiKey associated with the request being built.\"\n    },\n    {\n      \"name\": \"Builder.oldestAllowedVersion\",\n      \"description\": \"The minimum protocol version the builder will accept when constructing a request.\"\n    },\n    {\n      \"name\": \"Builder.latestAllowedVersion\",\n      \"description\": \"The maximum protocol version the builder will accept when constructing a request.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"AbstractRequest(ApiKeys apiKey, short version)\",\n      \"description\": \"Constructor that validates the supplied version against the ApiKey and stores both fields.\"\n    },\n    {\n      \"name\": \"short version()\",\n      \"description\": \"Returns the protocol version of this request.\"\n    },\n    {\n      \"name\": \"ApiKeys apiKey()\",\n      \"description\": \"Returns the ApiKey identifying the request type.\"\n    },\n    {\n      \"name\": \"Send toSend(RequestHeader header)\",\n      \"description\": \"Creates a Send object containing the serialized request (including size prefix) ready to be written to a network channel.\"\n    },\n    {\n      \"name\": \"ByteBuffer serializeWithHeader(RequestHeader header)\",\n      \"description\": \"Serializes the request together with the provided header **without** the size prefix, performing sanity checks that the header matches this request's apiKey and version.\"\n    },\n    {\n      \"name\": \"ByteBuffer serialize()\",\n      \"description\": \"Serializes only the request body (no header) into a ByteBuffer; used mainly in tests.\"\n    },\n    {\n      \"name\": \"int sizeInBytes()\",\n      \"description\": \"Computes the size, in bytes, of the serialized request body for the stored version.\"\n    },\n    {\n      \"name\": \"String toString(boolean verbose)\",\n      \"description\": \"Returns a string representation of the request's underlying data structure. The `verbose` flag is currently unused.\"\n    },\n    {\n      \"name\": \"AbstractResponse getErrorResponse(Throwable e)\",\n      \"description\": \"Convenience method that creates an error response using the default throttle time.\"\n    },\n    {\n      \"name\": \"abstract AbstractResponse getErrorResponse(int throttleTimeMs, Throwable e)\",\n      \"description\": \"Subclasses must implement this to produce an appropriate error response for the request, optionally including a throttle time.\"\n    },\n    {\n      \"name\": \"AbstractResponse errorCounts(Throwable e)\",\n      \"description\": \"Generates an error response and extracts its error counts; useful for metrics that track perrequest error statistics.\"\n    },\n    {\n      \"name\": \"static AbstractRequest parseRequest(ApiKeys apiKey, short version, ByteBuffer buffer)\",\n      \"description\": \"Factory method that parses a concrete request implementation from the given ByteBuffer based on the supplied ApiKey and version, returning an AbstractRequest wrapper.\"\n    },\n    {\n      \"name\": \"private static AbstractRequest doParseRequest(ApiKeys apiKey, short version, ByteBuffer buffer)\",\n      \"description\": \"Internal switchstatement that maps every known ApiKey to its concrete request class and calls its static `parse` method. Throws an AssertionError for unknown keys.\"\n    },\n    {\n      \"name\": \"Builder.version() / Builder.apiKey() / Builder.oldestAllowedVersion() / Builder.latestAllowedVersion()\",\n      \"description\": \"Accessor methods inside the nested Builder class that expose the builder's configuration.\"\n    },\n    {\n      \"name\": \"abstract static class Builder<T extends Builder<T>>\",\n      \"description\": \"A generic builder base for concrete request builders. It stores the ApiKey and allowed version range and defines `build()` contract in subclasses.\"\n    }\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_method_summary",
      "chunk_id": "parent_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"method_purpose\": \"The method is a factory that reads a binary Kafka request from a ByteBuffer, determines which concrete request class to instantiate based on the supplied ApiKey and protocol version, and returns the resulting object as an AbstractRequest. In other words, it deserialises raw network data into the appropriate requesttype object.\",\n  \"cyclic_hierarchy_relation\": \"The static method lives in the abstract superclass (AbstractRequest) but contains explicit knowledge of every concrete subclass (e.g., ProduceRequest, FetchRequest, ). Each subclass already extends AbstractRequest, so the superclass now depends on the subclasses for object creation. This creates a cyclic hierarchy relationship: subclasses depend on the abstract superclass for type inheritance, while the superclass depends on the subclasses for its factory logic. This violates the typical topdown dependency direction in inheritance hierarchies.\",\n  \"design_issues\": [\n    \"**Violates the Open/Closed Principle**  Adding a new request type requires modifying this method, recompiling, and redeploying the whole library.\",\n    \"**Tight coupling**  The abstract base class is tightly coupled to every concrete request implementation, making the codebase harder to evolve and test in isolation.\",\n    \"**Scalability & maintainability**  The switch statement is extremely long; it is errorprone, difficult to read, and cumbersome to keep in sync with the ApiKey enum.\",\n    \"**Potential for missed cases**  If a new ApiKey is added but the corresponding case is forgotten, the default branch throws an AssertionError at runtime, leading to crashes in production.\",\n    \"**Testing overhead**  Unittesting this method means exercising every branch, which is costly and fragile as new branches are added.\",\n    \"**Performance**  Although a switch on an enum is fast, the sheer number of branches can increase method size and affect instruction cache utilisation.\",\n    \"**Version handling is implicit**  The method simply forwards the version to each requests parse method; if a request supports only a subset of versions, the factory does not enforce or validate that, possibly resulting in subtle bugs.\",\n    \"**No extensibility for plugins**  Thirdparty extensions cannot add new request types without modifying the core library, because the factory is not designed for dynamic registration.\",\n    \"**ByteBuffer state management**  The method assumes the buffer is positioned correctly for each concrete parser; any mistake in one parser can corrupt the buffer for subsequent parsing attempts, but the factory does not guard against this.\",\n    \"**Lack of documentation on error handling**  The default case throws AssertionError, which is unchecked and may be inappropriate for a network protocol parser where a graceful error response would be preferable.\"\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "invocation_summary",
      "chunk_id": "invocation_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"invocation_purpose\": \"The call invokes the static `parse` method of the `ListClientMetricsResourcesRequest` class, converting the raw `buffer` (typically a byte array or ByteBuffer containing the serialized request payload) into a concrete `ListClientMetricsResourcesRequest` instance that is appropriate for the supplied `apiVersion`. This enables the server or client to interpret the incoming data as a typed request object that can be processed by the rest of the system.\",\n  \"cyclic_dependency_explanation\": \"A cyclic dependency can arise if `ListClientMetricsResourcesRequest.parse` internally relies on another component (e.g., a deserializer or a schema registry) that, in turn, needs to instantiate or reference `ListClientMetricsResourcesRequest` again. For example, the parser might call a generic `RequestParserFactory` that uses reflection to locate a parser for the request type, and the factory might be configured to map the request class back to `ListClientMetricsResourcesRequest.parse`. This mutual referencing creates a loop: \\n1. The outer code calls `ListClientMetricsResourcesRequest.parse`.\\n2. Inside `parse`, the generic factory is consulted to obtain a parser for the same request type.\\n3. The factory returns a reference to `ListClientMetricsResourcesRequest.parse` again, causing the parser to invoke itself (directly or indirectly) and leading to recursion or a compilation-time cyclic import.\\nThus, the snippet reflects a cyclic dependency because the parsing logic depends on a component that is, directly or indirectly, dependent on the same parsing method or class, forming a cycle in the module/import graph.\\n\"\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/ListClientMetricsResourcesRequest.java",
      "chunk_type": "child_method",
      "chunk_id": "child_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier))) (identifier))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/ListClientMetricsResourcesRequest.java",
      "chunk_type": "child_file_structure",
      "chunk_id": "child_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) superclass: (superclass (type_identifier)) body: (class_body (class_declaration (modifiers) name: (identifier) superclass: (superclass (generic_type (scoped_type_identifier (type_identifier) (type_identifier)) (type_arguments (type_identifier)))) body: (class_body (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (super) arguments: (argument_list (field_access object: (identifier) field: (identifier)))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier) (identifier)))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))))) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (super) arguments: (argument_list (field_access object: (identifier) field: (identifier)) (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))) (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (method_invocation object: (object_creation_expression type: (type_identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) name: (identifier) arguments: (argument_list (identifier))))) (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier))) (identifier)))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (boolean_type) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/ListClientMetricsResourcesRequest.java",
      "chunk_type": "child_file_summary",
      "chunk_id": "child_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"class_purpose\": \"Represents a LIST_CLIENT_METRICS_RESOURCES request in the Kafka protocol.  It carries the request payload (ListClientMetricsResourcesRequestData) from a client to a broker and provides helpers to parse the request, generate error responses, and expose the underlying data.\",\n  \"key_fields\": [\n    {\n      \"name\": \"data\",\n      \"description\": \"A `ListClientMetricsResourcesRequestData` instance that holds the serialized request fields (e.g., filters, pagination, etc.). It is immutable and is the core payload of the request.\"\n    },\n    {\n      \"name\": \"Builder.data\",\n      \"description\": \"The same requestdata object used by the builder to construct a `ListClientMetricsResourcesRequest`. Allows callers to set up the request payload before building.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"Builder.build(short version)\",\n      \"description\": \"Creates a new `ListClientMetricsResourcesRequest` with the supplied API version, using the builders `data` field.\"\n    },\n    {\n      \"name\": \"Builder.toString()\",\n      \"description\": \"Returns a string representation of the underlying request data, useful for logging/debugging.\"\n    },\n    {\n      \"name\": \"data()\",\n      \"description\": \"Public accessor that returns the `ListClientMetricsResourcesRequestData` payload contained in the request.\"\n    },\n    {\n      \"name\": \"getErrorResponse(int throttleTimeMs, Throwable e)\",\n      \"description\": \"Generates a `ListClientMetricsResourcesResponse` that represents an error condition. It maps the exception to a Kafka `Errors` code, sets the provided throttle time, and returns the response object.\"\n    },\n    {\n      \"name\": \"parse(ByteBuffer buffer, short version)\",\n      \"description\": \"Static factory that reads the binary wire format from the given `ByteBuffer`, deserializes it into a `ListClientMetricsResourcesRequestData` (using `ByteBufferAccessor`), and returns a new request instance for the specified version.\"\n    },\n    {\n      \"name\": \"toString(boolean verbose)\",\n      \"description\": \"Overrides `AbstractRequest`s `toString` to return the string form of the request data. The `verbose` flag is ignored because the datas own `toString` already contains all details.\"\n    }\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/132/before/clients/src/main/java/org/apache/kafka/common/requests/ListClientMetricsResourcesRequest.java",
      "chunk_type": "child_method_summary",
      "chunk_id": "child_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"method_purpose\": \"The `parse` method is a static factory that deserialises a raw `ByteBuffer` (containing a clientmetrics request) into a concrete `ListClientMetricsResourcesRequest` instance. It interprets the binary data according to the supplied protocol `version`, builds a `ListClientMetricsResourcesRequestData` object (the lowlevel data holder) and then wraps that in the highlevel request object that the rest of the code works with.\",\n  \"exposed_details\": \"By constructing a `ListClientMetricsResourcesRequestData` with a `new ByteBufferAccessor(buffer)` and the `version`, the method leaks two internal implementation details to the superclass (or any higherlevel request abstraction that `ListClientMetricsResourcesRequest` extends):\\n1. **Raw byteaccess layer**  the `ByteBufferAccessor` gives direct, lowlevel access to the original `ByteBuffer` contents, exposing the exact wire format and ordering of fields.\\n2. **Protocol version**  the `short version` value is passed down unchanged, exposing which schema version the data was interpreted with. \\nThese details are handed to the superclass via the constructor `new ListClientMetricsResourcesRequest(requestData, version)`, allowing the parent class to see and potentially manipulate the raw parsed payload and version information.\",\n  \"cyclic_hierarchy_impact\": \"If the parent class (e.g., an abstract `AbstractRequest` or a factory in a higherlevel API) defines its own `parse` logic that, either directly or via reflection, delegates to the subclasss static `parse` method, a circular call chain can arise:\\n1. The parents `parse(ByteBuffer, short)` is invoked.\\n2. Inside that method the parent decides which concrete request type to instantiate and calls `ListClientMetricsResourcesRequest.parse(buffer, version)`.\\n3. `ListClientMetricsResourcesRequest.parse` creates a new `ListClientMetricsResourcesRequest`, which calls the superclass constructor.\\n4. If the superclass constructor (or an overridden `init` hook) again attempts to parse the same buffer  perhaps to validate common fields  it may call back to the parents `parse` method.\\n5. Steps 24 repeat, causing an infinite recursion / circular dependency between the parents parsing routine and the subclasss static factory.\\nTo avoid this, the parent should not invoke the subclasss static `parse` from within its own parsing flow, or the subclass should not call back into parent parsing logic during construction. Separating rawbuffer handling (in the parent) from concretetype instantiation (in the subclass) breaks the cycle.\"\n}\n```"
    }
  ]
}