{
  "antipattern_type": "CH",
  "project_name": "kafka",
  "commit_number": "commit_1000",
  "id": "158",
  "group_id": 6,
  "chunks": [
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_method",
      "chunk_id": "parent_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier)))))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_call_child",
      "chunk_id": "parent_call_child",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_file_structure",
      "chunk_id": "parent_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) interfaces: (super_interfaces (type_list (type_identifier))) body: (class_body (class_declaration (modifiers) name: (identifier) type_parameters: (type_parameters (type_parameter (type_identifier) (type_bound (type_identifier)))) body: (class_body (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (boolean_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (false))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (this) arguments: (argument_list (identifier) (identifier) (identifier))))) (block_comment) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list))))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)))))) (field_declaration (modifiers) type: (integral_type) declarator: (variable_declarator name: (identifier))) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (if_statement condition: (parenthesized_expression (unary_expression operand: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))))) consequence: (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (identifier)))))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (block_comment) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (method_invocation name: (identifier) arguments: (argument_list))))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (if_statement condition: (parenthesized_expression (binary_expression left: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) right: (identifier))) consequence: (block (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))))) (if_statement condition: (parenthesized_expression (binary_expression left: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) right: (identifier))) consequence: (block (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (binary_expression left: (binary_expression left: (string_literal (string_fragment)) right: (identifier)) right: (string_literal (string_fragment))) right: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))))) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)) (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (line_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list)) (identifier)))))) (line_comment) (method_declaration (modifiers) type: (integral_type) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (method_invocation name: (identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list)) (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (boolean_type) name: (identifier))) body: (block (return_statement (method_invocation object: (method_invocation name: (identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (true)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (return_statement (method_invocation name: (identifier) arguments: (argument_list (field_access object: (identifier) field: (identifier)) (identifier)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier)))) (block_comment) (method_declaration (modifiers) type: (generic_type (type_identifier) (type_arguments (type_identifier) (type_identifier))) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation name: (identifier) arguments: (argument_list (decimal_integer_literal) (identifier))))) (if_statement condition: (parenthesized_expression (binary_expression left: (identifier) right: (null_literal))) consequence: (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (this))))) alternative: (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))))) (block_comment) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (integral_type) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list)))) (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation name: (identifier) arguments: (argument_list (identifier) (identifier) (identifier))) (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (switch_expression condition: (parenthesized_expression (identifier)) body: (switch_block (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label (identifier)) (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier) (identifier))))) (switch_block_statement_group (switch_label) (throw_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (binary_expression left: (string_literal (string_fragment)) right: (string_literal (string_fragment))) (identifier))))))))))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_file_summary",
      "chunk_id": "parent_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"class_purpose\": \"AbstractRequest is the base class for all Kafka protocol request messages. It encapsulates common request metadata (API key and version), provides utilities for serialization, size calculation, conversion to a network Send, and defines a contract for creating error responses. It also contains a static factory that parses raw bytes into the concrete request subclass based on the ApiKey and version.\",\n  \"key_fields\": [\n    {\n      \"name\": \"version\",\n      \"description\": \"The protocol version of this request instance. It is validated against the ApiKey's supported versions in the constructor.\"\n    },\n    {\n      \"name\": \"apiKey\",\n      \"description\": \"The ApiKeys enum value that identifies the type of request (e.g., PRODUCE, FETCH).\"\n    },\n    {\n      \"name\": \"Builder.apiKey\",\n      \"description\": \"In the nested Builder class, the ApiKey for which the builder will create a request.\"\n    },\n    {\n      \"name\": \"Builder.oldestAllowedVersion\",\n      \"description\": \"The minimum protocol version the builder permits when constructing a request.\"\n    },\n    {\n      \"name\": \"Builder.latestAllowedVersion\",\n      \"description\": \"The maximum protocol version the builder permits when constructing a request.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"AbstractRequest(ApiKeys apiKey, short version)\",\n      \"description\": \"Constructor that validates the supplied version against the ApiKey and stores both fields.\"\n    },\n    {\n      \"name\": \"short version()\",\n      \"description\": \"Returns the protocol version of this request.\"\n    },\n    {\n      \"name\": \"ApiKeys apiKey()\",\n      \"description\": \"Returns the ApiKey identifying the request type.\"\n    },\n    {\n      \"name\": \"Send toSend(RequestHeader header)\",\n      \"description\": \"Creates a Send object that includes the sizeprefixed serialized request (header + body) ready to be written to a socket.\"\n    },\n    {\n      \"name\": \"ByteBuffer serializeWithHeader(RequestHeader header)\",\n      \"description\": \"Serializes the request together with the supplied header **without** a size prefix, after verifying that the header matches this request's ApiKey and version.\"\n    },\n    {\n      \"name\": \"ByteBuffer serialize()\",\n      \"description\": \"Serializes only the request body (no header) into a ByteBuffer; used mainly in tests.\"\n    },\n    {\n      \"name\": \"int sizeInBytes()\",\n      \"description\": \"Computes the size of the serialized request body for the current version using an ObjectSerializationCache.\"\n    },\n    {\n      \"name\": \"String toString(boolean verbose)\",\n      \"description\": \"Returns a string representation of the underlying request data structure; the `verbose` flag is currently ignored.\"\n    },\n    {\n      \"name\": \"String toString()\",\n      \"description\": \"Overrides Object.toString() to call the verbose version of toString(boolean).\"\n    },\n    {\n      \"name\": \"AbstractResponse getErrorResponse(Throwable e)\",\n      \"description\": \"Convenience method that creates an error response for this request using the default throttle time.\"\n    },\n    {\n      \"name\": \"abstract AbstractResponse getErrorResponse(int throttleTimeMs, Throwable e)\",\n      \"description\": \"Abstract method that concrete request subclasses must implement to translate an exception into a protocolspecific error response, optionally including a throttle time.\"\n    },\n    {\n      \"name\": \"AbstractResponse errorCounts(Throwable e)\",\n      \"description\": \"Wraps `getErrorResponse(int, Throwable)` and extracts the responses error counts; allows callers to obtain the error metrics without knowing the concrete response type.\"\n    },\n    {\n      \"name\": \"static AbstractRequest parseRequest(ApiKeys apiKey, short version, ByteBuffer buffer)\",\n      \"description\": \"Public factory that delegates to `doParseRequest` to instantiate the concrete request subclass that corresponds to the given ApiKey and version, then wraps it in a RequestHeaderagnostic `AbstractRequest` reference.\"\n    },\n    {\n      \"name\": \"private static AbstractRequest doParseRequest(ApiKeys apiKey, short version, ByteBuffer buffer)\",\n      \"description\": \"Huge switchstatement that selects the appropriate concrete request class (e.g., ProduceRequest, FetchRequest, etc.) and calls its static `parse` method to decode the raw bytes.\"\n    },\n    {\n      \"name\": \"Builder<ApiKey> Builder methods (e.g., Builder(ApiKeys apiKey), Builder.apiKey(), Builder.oldestAllowedVersion(), Builder.latestAllowedVersion())\",\n      \"description\": \"Factory methods inside the nested static Builder class that configure the allowed version range and ultimately build a concrete request instance via subclassspecific `build` implementations.\"\n    }\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "parent_method_summary",
      "chunk_id": "parent_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "{\n  \"method_purpose\": \"The method **doParseRequest** is a central factory that turns the raw bytes of a Kafka protocol request (provided as a `ByteBuffer`) into a concrete `AbstractRequest` subclass instance. It receives the requests `ApiKey` (which identifies the request type) and the protocol version, then selects the matching request class and delegates the actual parsing to that classs static `parse(ByteBuffer, short)` method. The returned object is the typed request ready for further processing by the broker.\",\n  \"cyclic_hierarchy_relation\": \"The method lives in a utility (or abstractbase) class that returns an `AbstractRequest`, i.e. the **superclass** of all concrete request types. However, it contains a hardcoded `switch` that references every concrete subclass (`ProduceRequest`, `FetchRequest`, ). This creates a **reverse dependency**: the highlevel abstraction (`AbstractRequest`/the factory) depends on the lowlevel concrete implementations. In a clean hierarchy the superclass should be ignorant of its subclasses; here the superclass (or a class at the same abstraction level) is forced to know about every subclass, forming a cyclic dependency between the abstraction and its concrete implementations.\",\n  \"design_issues\": [\n    \"**Violation of the Open/Closed Principle**  Adding a new request type requires modifying this method (adding a new case), recompiling the factory, and redeploying, instead of just adding a new class that registers itself.\",\n    \"**Tight coupling / Reverse dependency**  The factory (or abstract base) must be updated for every new request, making the codebase fragile and harder to evolve.\",\n    \"**Massive switch statement**  The method is extremely long, difficult to read, and errorprone. It is also a maintenance burden as the list of ApiKeys grows.\",\n    \"**Scalability concerns**  Every time a new ApiKey is introduced (e.g., new Kafka features), developers must remember to add the corresponding case; missing a case leads to an `AssertionError` at runtime.\",\n    \"**Static parse methods**  Relying on static parsing forces each request class to expose a particular signature and prevents the use of more flexible parsing strategies (e.g., dependency injection, strategy pattern).\",\n    \"**Version handling is delegated to each subclass**  While this is necessary, the central method does not enforce any version compatibility checks, so inconsistent handling across subclasses can slip through.\",\n    \"**No fallback for unknown/unsupported ApiKeys**  The default branch throws an `AssertionError`, which is an unchecked error that may crash the broker rather than gracefully handling an unknown request.\",\n    \"**Testing difficulty**  The large monolithic method makes unit testing cumbersome; each branch must be exercised, and any change to the switch can unintentionally affect unrelated branches.\",\n    \"**Potential performance impact**  Although a `switch` on an enum is generally fast, the sheer number of cases can increase the methods bytecode size and affect instruction cache performance.\",\n    \"**Duplication of responsibility**  The method both selects the request type *and* parses the payload. Separating selection (factory) from parsing (builder/reader) would yield clearer responsibilities.\"\n  ]\n}"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/AbstractRequest.java",
      "chunk_type": "invocation_summary",
      "chunk_id": "invocation_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"invocation_purpose\": \"The call invokes the static `parse` method of the `ControlledShutdownRequest` class to deserialize a `ControlledShutdownRequest` object from the raw binary `buffer` using the specified `apiVersion`. In the context of Kafka's request handling pipeline, this step translates the incoming network payload into a stronglytyped request object that the broker can process.\",\n  \"cyclic_dependency_explanation\": \"The use of `ControlledShutdownRequest.parse` can illustrate a cyclic dependency when the parsing logic relies on components that, in turn, depend on the request type itself. For example, the parser may need to consult a `RequestHeader` or a `VersionedSerializer` that references `ControlledShutdownRequest` to determine the correct schema version, while `ControlledShutdownRequest` also depends on that serializer to implement its own `parse` method. This bidirectional reliance creates a cycle: `ControlledShutdownRequest  Parser/Serializer  RequestHeader  ControlledShutdownRequest`. Such cycles can complicate module initialization and testing, and often require careful design (e.g., dependency injection or separating parsing from request definition) to break the loop.\"\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownRequest.java",
      "chunk_type": "child_method",
      "chunk_id": "child_method",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier))) (identifier))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownRequest.java",
      "chunk_type": "child_file_structure",
      "chunk_id": "child_file_structure",
      "level": 3,
      "parent_chunk_id": null,
      "ast_subtree": "(program (block_comment) (package_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier)) name: (identifier))) (import_declaration (scoped_identifier scope: (scoped_identifier scope: (identifier) name: (identifier)) name: (identifier))) (class_declaration (modifiers) name: (identifier) superclass: (superclass (type_identifier)) body: (class_body (class_declaration (modifiers) name: (identifier) superclass: (superclass (generic_type (scoped_type_identifier (type_identifier) (type_identifier)) (type_arguments (type_identifier)))) body: (class_body (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (super) arguments: (argument_list (field_access object: (identifier) field: (identifier)) (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier) (identifier)))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (method_invocation object: (identifier) name: (identifier) arguments: (argument_list))))))) (field_declaration (modifiers) type: (type_identifier) declarator: (variable_declarator name: (identifier))) (constructor_declaration (modifiers) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (constructor_body (explicit_constructor_invocation constructor: (super) arguments: (argument_list (field_access object: (identifier) field: (identifier)) (identifier))) (expression_statement (assignment_expression left: (field_access object: (this) field: (identifier)) right: (identifier))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (integral_type) name: (identifier)) (formal_parameter type: (type_identifier) name: (identifier))) body: (block (local_variable_declaration type: (type_identifier) declarator: (variable_declarator name: (identifier) value: (method_invocation object: (object_creation_expression type: (type_identifier) arguments: (argument_list)) name: (identifier) arguments: (argument_list (method_invocation object: (method_invocation object: (identifier) name: (identifier) arguments: (argument_list (identifier))) name: (identifier) arguments: (argument_list)))))) (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier)))))) (method_declaration (modifiers) type: (type_identifier) name: (identifier) parameters: (formal_parameters (formal_parameter type: (type_identifier) name: (identifier)) (formal_parameter type: (integral_type) name: (identifier))) body: (block (return_statement (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (object_creation_expression type: (type_identifier) arguments: (argument_list (identifier))) (identifier))) (identifier)))))) (method_declaration (modifiers (marker_annotation name: (identifier))) type: (type_identifier) name: (identifier) parameters: (formal_parameters) body: (block (return_statement (identifier)))))))"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownRequest.java",
      "chunk_type": "child_file_summary",
      "chunk_id": "child_file_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"class_purpose\": \"Represents a KafkaControlledShutdown request. It holds the protocolspecific request data, provides a builder for creating instances, can parse a request from a ByteBuffer, and generates an appropriate error response when needed.\",\n  \"key_fields\": [\n    {\n      \"name\": \"data\",\n      \"description\": \"The immutable `ControlledShutdownRequestData` object that contains all fields defined by the ControlledShutdown request schema (e.g., broker ID, timeout, etc.). This is the payload transmitted over the wire.\"\n    }\n  ],\n  \"key_methods\": [\n    {\n      \"name\": \"ControlledShutdownRequest(ControlledShutdownRequestData data, short version)\",\n      \"description\": \"Private constructor used by the builder and the static `parse` method to create a request instance with the supplied data and protocol version.\"\n    },\n    {\n      \"name\": \"getErrorResponse(int throttleTimeMs, Throwable e)\",\n      \"description\": \"Creates a `ControlledShutdownResponse` that carries the error code corresponding to the supplied exception. The throttle time is ignored for this request type.\"\n    },\n    {\n      \"name\": \"parse(ByteBuffer buffer, short version)\",\n      \"description\": \"Static factory that reads a `ByteBuffer` using `ByteBufferAccessor` and deserializes it into a `ControlledShutdownRequestData` instance, then wraps it in a new `ControlledShutdownRequest`.\"\n    },\n    {\n      \"name\": \"data()\",\n      \"description\": \"Returns the underlying `ControlledShutdownRequestData` instance so callers can inspect the request fields.\"\n    },\n    {\n      \"name\": \"Builder(ControlledShutdownRequestData data, short desiredVersion)\",\n      \"description\": \"Constructor of the inner `Builder` class; stores the request data and the desired API version for later construction.\"\n    },\n    {\n      \"name\": \"build(short version)\",\n      \"description\": \"Instantiates a `ControlledShutdownRequest` using the builders stored data and the version supplied by the request handling framework.\"\n    },\n    {\n      \"name\": \"toString()\",\n      \"description\": \"Delegates to `ControlledShutdownRequestData.toString()` to provide a readable representation of the request payload (useful for logging and debugging).\"\n    }\n  ]\n}\n```"
    },
    {
      "file_path": "/data/sanglei/Anti-patternRAG/data/CH/kafka/commit_1000/158/before/clients/src/main/java/org/apache/kafka/common/requests/ControlledShutdownRequest.java",
      "chunk_type": "child_method_summary",
      "chunk_id": "child_method_summary",
      "level": 3,
      "parent_chunk_id": null,
      "llm_description": "```json\n{\n  \"method_purpose\": \"The static `parse` method is a deserialization helper. It takes a `ByteBuffer` that contains the binary representation of a ControlledShutdown request and a protocol version, builds a `ControlledShutdownRequestData` object (which knows how to read the fields from the buffer), and then wraps that data in a new `ControlledShutdownRequest` instance. In short, its purpose is to convert raw wire bytes into a fullyformed request object that the rest of the broker code can work with.\",\n  \"exposed_details\": \"The method hands two internal pieces of information to the rest of the request hierarchy:\\n1. **The raw buffer accessor**  `new ByteBufferAccessor(buffer)` gives the generated `ControlledShutdownRequestData` direct, lowlevel read access to the original `ByteBuffer`. This leaks the exact byte layout and position handling details to the data object.\\n2. **The protocol version**  the `short version` argument is passed both to the `ControlledShutdownRequestData` constructor and to the `ControlledShutdownRequest` constructor. Consequently, the version number becomes part of the requests state and is available to the superclass (`AbstractRequest` or whatever base class `ControlledShutdownRequest` extends). \\nBy forwarding these values, the subclass is exposing its parsing internals (the accessor and version) to the superclass, which typically stores the request data in a generic field (e.g., `protected final RequestData data;`). This allows the base class to operate on the request without knowing its concrete type, but it also means the base class now has direct visibility into the lowlevel parsing details.\",\n  \"cyclic_hierarchy_impact\": \"If the parent class (the abstract request base) were to invoke a subclassspecific method that, in turn, triggers the static `parse` method, a circular dependency could arise. For example:\\n```java\\nabstract class AbstractRequest {\\n    protected final RequestData data;\\n    protected AbstractRequest(short version) {\\n        // The base class tries to lazily initialise the concrete request\\n        this.data = createData(version); // a method overridden by subclasses\\n    }\\n    protected abstract RequestData createData(short version);\\n}\\n\\npublic class ControlledShutdownRequest extends AbstractRequest {\\n    public ControlledShutdownRequest(ControlledShutdownRequestData data, short version) {\\n        super(version);\\n        // ...\\n    }\\n    @Override\\n    protected RequestData createData(short version) {\\n        // Accidentally call the static parse again\\n        return parse(ByteBuffer.wrap(...), version).data();\\n    }\\n    public static ControlledShutdownRequest parse(ByteBuffer buffer, short version) { ... }\\n}\\n```\\nDuring construction, `AbstractRequest` calls `createData`, which the subclass implements by calling `parse`. `parse` creates a new `ControlledShutdownRequest`, which again invokes the superclass constructor, which again calls `createData`, and so on  leading to infinite recursion and a stack overflow. In this scenario the subclasss static `parse` method is indirectly invoked by the parent class, creating a circular dependency between the two layers.\\nTo avoid such a problem, the base class should not call subclassspecific parsing logic, or the subclass should implement `createData` without delegating back to `parse`.\"\n}\n```"
    }
  ]
}